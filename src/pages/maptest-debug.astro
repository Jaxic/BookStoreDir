---
// Simple debug test for Leaflet loading
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Leaflet Debug Test</title>
    
    <!-- Load Leaflet CSS and JS from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Load Leaflet MarkerCluster CSS and JS from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  </head>
  <body>
    <div style="padding: 20px;">
      <h1>Leaflet Debug Test</h1>
      <div id="map" style="width: 100%; height: 400px; border: 1px solid #ccc;"></div>
      <div id="debug" style="margin-top: 20px; padding: 10px; background: #f0f0f0;">
        <h3>Debug Info:</h3>
        <div id="debug-content">Loading...</div>
      </div>
    </div>

    <script>
      function debugInfo() {
        const debug = document.getElementById('debug-content');
        let info = [];
        
        info.push(`Leaflet available: ${typeof L !== 'undefined'}`);
        if (typeof L !== 'undefined') {
          info.push(`Leaflet version: ${L.version}`);
          info.push(`L.Map available: ${typeof L.Map !== 'undefined'}`);
          info.push(`L.TileLayer available: ${typeof L.TileLayer !== 'undefined'}`);
          info.push(`L.MarkerClusterGroup available: ${typeof L.MarkerClusterGroup !== 'undefined'}`);
        }
        
        debug.innerHTML = info.join('<br>');
      }
      
      // Wait for all scripts to load
      window.addEventListener('load', function() {
        setTimeout(() => {
          debugInfo();
          
          // Try to create a simple map
          try {
            console.log('Attempting to create map...');
            const map = L.map('map').setView([51.505, -0.09], 13);
            
            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
              maxZoom: 19,
              attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }).addTo(map);
            
            // Test marker cluster
            if (L.MarkerClusterGroup) {
              console.log('Testing marker cluster...');
              const markers = L.markerClusterGroup();
              
              // Add a few test markers
              const marker1 = L.marker([51.5, -0.09]);
              const marker2 = L.marker([51.51, -0.08]);
              const marker3 = L.marker([51.49, -0.1]);
              
              markers.addLayer(marker1);
              markers.addLayer(marker2);
              markers.addLayer(marker3);
              
              map.addLayer(markers);
              
              console.log('✅ Map and clustering working!');
              document.getElementById('debug-content').innerHTML += '<br><strong style="color: green;">✅ Map created successfully with clustering!</strong>';
            } else {
              console.error('❌ MarkerClusterGroup not available');
              document.getElementById('debug-content').innerHTML += '<br><strong style="color: red;">❌ MarkerClusterGroup not available</strong>';
            }
            
          } catch (error) {
            console.error('❌ Error creating map:', error);
            document.getElementById('debug-content').innerHTML += `<br><strong style="color: red;">❌ Error: ${error.message}</strong>`;
          }
        }, 1000);
      });
    </script>
  </body>
</html> 